<div class="black">
    <div class="container row">
        <div>
            <div class="col l6 s12">
                <h5 class="yellow-text">Calculate your BMI</h5>
                <div>
                    <form class="col s12">
                        <div>

                            <div class="input-field col s4">
                                <input id="weight" type="number" class="validate">
                                <label for="weight">Weight (Pounds):</label>
                            </div>

                            <div class="row">
        
                                <div class="input-field col s4">
                                    <input id="feet" type="number" class="validate">
                                    <label for="feet">Height (Feet):</label>
                                </div>

                                <div class="input-field col s4">
                                    <input id="inches" type="number" class="validate">
                                    <label for="inches">Height (Inches):</label>
                                </div>

                            </div>
                        </div>
                        <button class="waves-effect waves-light yellow btn-small black-text">Calculate</a>
                    </form>
                </div>
            </div>
            
            <div class="col l4 offset-8 s8">
                <h5 class="yellow-text">Your BMI</h5>
                <div class="row">
                <div class="col s4 m6">
                    <div class="card yellow darken-1">
                    <div class="card-content black-text">
                        <span class="calculatedBMI">22.3</span>
                    </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

<script >
    $(document).ready(function() {
      var BMIForm = $("form");
        // get request for goals on load
        //$.get("/api/BMI"),function(data){
        //return data
        //}
        // Getting references to our form and inputs

        // When the form is submitted, we validate there's an email and password entered
        BMIForm.on("submit", function(event) {
        event.preventDefault();

        var feetInput = parseInt(("input#feet"));
        var inchesInput = parseInt(("input#inches"));
        var weightInput = parseInt(("input#weight"));

        var heightM = ((((feetInput*12)+inchesInput)*2.54)/100);
        var weightKG = (weightInput/2.20462);
        var BMI= weightKG/(heightM*heightM);

        var userData = {
            height: feetInput*12+inchesInput,
            weight: weightInput,
            BMI: BMI,
        };

        if (!userData.height || !userData.weight || !userData.BMI) {
            return;
        }

        // If we have an email and password we run the loginUser function and clear the form
        addBMI(userData.height,userData.weight,userData.BMI);
        feetInput.val("");
        inchesInput.val("");
        weightInput.val("");
        });

        // loginUser does a post to our "api/login" route and if successful, redirects us the the members page
        function addBMI(height,weight,BMI) {
        $.post("/api/BMI", {
            height: height,
            weight:weight,
            BMI:BMI
        })
            .then(function() {
            window.location.replace("/BMI");
            // If there's an error, log the error
            })
            .catch(function(err) {
            console.log(err);
            });
        }
    });
</script>